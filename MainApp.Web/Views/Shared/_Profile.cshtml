@using MainApp.BLL.Context
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject ApplicationDbContext _context

@{
    ViewData["Title"] = "users list";
}

@{
    var user = this.HttpContextAccessor.HttpContext.User.Identity.Name;
    var userFullName = "Brak zalogowanego uzytkownika";
    if (user != null)
    {
        userFullName = $"{user}";
    }
}

<ul class="navbar-nav flex-grow-1">


                   @if (HttpContextAccessor.HttpContext.User.Identity.IsAuthenticated)
                   {
    
                     <div class="dropdown">
                        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="~/34247_user_icon.png" alt="" width="32" height="32" class="rounded-circle me-2">
                            <strong>@userFullName</strong>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">

                            @if (HttpContextAccessor.HttpContext.User.Identity.Name.Contains("admin"))
                            {
                                <li>
                                    <a class="nav-link text-white" asp-controller="Event" asp-action="DeleteAllEvents">
                                        <i class="bi bi-trash me-2"></i>
                                        Delete events
                                    </a>
                                </li>
                            }

                            <li>
                                <a class="nav-link text-dark border border-warning rounded" asp-area="" asp-controller="account" asp-action="Logout">
                                    <i class="bi bi-person me-2"></i>
                                    Logout
                                </a>
                            </li>


                        </ul>
                      </div>
                    }

                
 </ul>